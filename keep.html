<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/images/favico.png" type="image/x-icon">
  <title>Stocks & ETFs â€” InvestHub</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <!-- TradingView Widget -->
  <script src="https://s3.tradingview.com/tv.js"></script>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <style>
    :root {
      /* Dark & Gold Color Palette */
      --dark-primary: #000207;
      --dark-secondary: #1a1f2e;
      --dark-tertiary: #2d3345;
      --gold-primary: #ecc906dc;
      --gold-secondary: #bfac03e8;
      --gold-dark: #b59b04d8;
      --gold-gradient: linear-gradient(135deg, #ffd900a4 0%, #ae9f18 100%);
      --dark-gradient: linear-gradient(135deg, #0a0f1c 0%, #1a1f2e 100%);
      
      /* Text Colors */
      --text-light: #f8f9fa;
      --text-muted: #a0aec0;
      --text-dark: #2d3748;
      
      /* Component Colors */
      --card-bg: #1a1f2e;
      --section-bg: #0a0f1c;
      --border-color: #2d3345;
      
      /* Status Colors */
      --success: #48bb78;
      --danger: #f56565;
      --warning: #ed8936;
      --info: #4299e1;
      
      /* Button Colors */
      --btn-primary-bg: var(--gold-primary);
      --btn-primary-text: var(--dark-primary);
      --btn-primary-hover: var(--gold-secondary);
      
      --btn-secondary-bg: transparent;
      --btn-secondary-text: var(--gold-primary);
      --btn-secondary-border: var(--gold-primary);
      --btn-secondary-hover: rgba(255, 215, 0, 0.1);
    }

    [data-theme="light"] {
      --dark-primary: #f7f9fc;
      --dark-secondary: #ffffff;
      --dark-tertiary: #f1f5f9;
      --gold-primary: #a56b00;
      --text-light: #0b1220;
      --text-muted: #52607a;
      --border-color: #e6edf5;
    }

      /* Navbar Styles */
.navbar-trade {
  background-color: var(--dark-primary);
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
  padding: 0.9rem 0;
  transition: all 0.3s ease;
  border-bottom: 1px solid var(--border-color);
}

.navbar-trade .navbar-brand {
  font-weight: 700;
  font-size: 1.5rem;
  color: var(--gold-primary);
  display: flex;
  align-items: center;
}

.navbar-trade .navbar-brand i {
  margin-right: 8px;
  font-size: 1.8rem;
  color: var(--gold-primary);
}

.navbar-trade .navbar-nav .nav-link {
  color: var(--text-light);
  font-weight: 500;
  padding: 0.5rem 1rem;
  margin: 0 0.2rem;
  border-radius: 4px;
  transition: all 0.2s ease;
}

.navbar-trade .navbar-nav .nav-link:hover,
.navbar-trade .navbar-nav .nav-link:focus {
  background-color: var(--gold-primary);
  color: var(--dark-primary);
}

.navbar-trade .navbar-nav .nav-link.active {
  background-color: var(--gold-dark);
  color: var(--dark-primary);
  font-weight: 600;
}

.navbar-trade .navbar-nav .nav-link.active:hover {
  background-color: var(--gold-secondary);
  color: var(--dark-primary);
}

.navbar-trade .dropdown-menu {
  background-color: var(--dark-secondary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  padding: 0.5rem 0;
}

.navbar-trade .dropdown-item {
  padding: 0.7rem 1.5rem;
  color: var(--text-light);
  transition: all 0.2s ease;
}

.navbar-trade .dropdown-item:hover {
  background-color: var(--dark-tertiary);
  color: var(--gold-primary);
}

.navbar-trade .btn-signup .sign{
  background: var(--gold-gradient);
  color: var(--dark-primary);
  border: none;
  border-radius: 24px;
  padding: 0.5rem 1.5rem;
  font-weight: 600;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(255, 215, 0, 0.3);
  text-decoration: none;
}

.navbar-trade .btn-signup .sign:hover {
  background: var(--gold-secondary);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
}

.navbar-trade .btn-login .log {
  background-color: transparent;
  color: var(--gold-primary);
  border: 1px solid var(--gold-primary);
  border-radius: 24px;
  padding: 0.5rem 1.5rem;
  font-weight: 600;
  transition: all 0.2s ease;
  text-decoration: none;
}

.navbar-trade .btn-login .log:hover {
  background-color: rgba(255, 215, 0, 0.1);
  border-color: var(--gold-secondary);
  transform: translateY(-1px);
}

.navbar-toggler {
  border: 1px solid var(--gold-primary);
  background: transparent;
}

.navbar-toggler-icon {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 215, 0, 0.8%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
}

/* Mobile responsiveness for navbar */
@media (max-width: 991.98px) {
  .navbar-trade .navbar-nav {
    background: var(--dark-secondary);
    border-radius: 8px;
    padding: 1rem;
    margin-top: 1rem;
    border: 1px solid var(--border-color);
  }
  
  .navbar-trade .navbar-nav .nav-link {
    margin: 0.2rem 0;
  }
  
  .navbar-trade .btn-login,
  .navbar-trade .btn-signup {
    margin: 0.5rem 0;
    width: 100%;
    text-align: center;
  }
  
  /* Fix for dropdown menu on mobile */
  .navbar-trade .dropdown-menu {
    background-color: var(--dark-tertiary);
    border: none;
    border-radius: 6px;
    margin: 0.5rem 0;
    max-height: 300px;
    overflow-y: auto;
    padding: 0.5rem 0;
    position: static;
    float: none;
    width: 100%;
    box-shadow: none;
  }
  
  .navbar-trade .dropdown-item {
    padding: 0.6rem 1rem;
    font-size: 0.95rem;
  }
  
  .navbar-trade .dropdown-menu.show {
    display: block;
    margin-bottom: 1rem;
  }
  
  /* Add scrollbar styling for dropdown */
  .navbar-trade .dropdown-menu::-webkit-scrollbar {
    width: 6px;
  }
  
  .navbar-trade .dropdown-menu::-webkit-scrollbar-track {
    background: var(--dark-secondary);
    border-radius: 3px;
  }
  
  .navbar-trade .dropdown-menu::-webkit-scrollbar-thumb {
    background: var(--gold-primary);
    border-radius: 3px;
  }
  
  .navbar-trade .dropdown-menu::-webkit-scrollbar-thumb:hover {
    background: var(--gold-secondary);
  }
}

/* Extra small devices (phones, 576px and down) */
@media (max-width: 576px) {
  .navbar-trade .dropdown-menu {
    max-height: 250px;
  }
  
  .navbar-trade .dropdown-item {
    padding: 0.5rem 0.8rem;
    font-size: 0.9rem;
  }
}
    html, body {
      height: 100%;
      background: var(--dark-primary);
      color: var(--text-light);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    .container { max-width: 1200px; margin-left: auto; margin-right: auto; }

    .glow {
      color: var(--gold-primary);
      text-shadow: 0 0 12px rgba(236,201,6,0.25);
    }

    .card {
      background: linear-gradient(180deg, var(--dark-secondary), rgba(0,0,0,0.02));
      border: 1px solid var(--border-color);
      border-radius: 14px;
      padding: 18px;
    }

    .btn-gold {
      background: var(--gold-gradient);
      color: var(--dark-primary);
      border-radius: 999px;
      padding: 10px 18px;
      font-weight: 700;
      box-shadow: 0 6px 20px rgba(236,201,6,0.08);
      border: none;
      transition: all 0.3s ease;
    }

    .btn-gold:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(236,201,6,0.15);
    }

    .btn-ghost {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-light);
      padding: 8px 14px;
      border-radius: 999px;
      transition: all 0.3s ease;
    }

    .btn-ghost:hover {
      background: rgba(255,255,255,0.05);
      transform: translateY(-1px);
    }

    .ticker {
      background: var(--dark-tertiary);
      border-top: 1px solid var(--border-color);
      border-bottom: 1px solid var(--border-color);
      overflow: hidden;
      white-space: nowrap;
      padding: 8px 0;
      margin-top: 18px;
    }

    .ticker-track {
      display: inline-flex;
      gap: 48px;
      padding-left: 100%;
      animation: tickerScroll 28s linear infinite;
      align-items: center;
    }

    .ticker-item {
      color: var(--gold-primary);
      font-weight: 700;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 0.95rem;
    }

    @keyframes tickerScroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    .hero {
      position: relative;
      overflow: hidden;
      padding: 100px 12px 56px;
    }

    .hero-bg {
      position: absolute;
      inset: 0;
      background:
        radial-gradient( circle at 10% 80%, rgba(236,201,6,0.06), transparent 12%),
        radial-gradient( circle at 85% 10%, rgba(0,163,255,0.04), transparent 12% );
      z-index: 0;
      transform-origin: center;
    }

    .hero-inner { position: relative; z-index: 10; }

    .stock-card {
      border-radius: 12px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border: 1px solid rgba(255,255,255,0.03);
      padding: 16px;
      transition: transform 0.25s ease, box-shadow 0.25s ease;
      cursor: pointer;
    }
    .stock-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 40px rgba(0,0,0,0.35);
    }

    .stock-logo {
      width: 52px; height: 52px; border-radius: 10px;
      display:flex; align-items:center; justify-content:center;
      font-weight:800; color: var(--dark-primary); background: var(--gold-gradient);
    }

    .stock-price { font-size: 1.6rem; font-weight:800; color: var(--text-light); }
    .stock-change-up { color: var(--success); }
    .stock-change-down { color: var(--danger); }

    .etf-card, .tool-card { border-radius: 14px; padding: 22px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); }

    .trading-view { border-radius: 12px; overflow: hidden; border: 1px solid var(--border-color); background: linear-gradient(180deg, var(--dark-secondary), rgba(0,0,0,0.02)); }

    /* modal */
    .modal-bg { position: fixed; inset: 0; background: rgba(2,6,23,0.6); display:flex; align-items:center; justify-content:center; z-index:60; }
    .modal { width: 100%; max-width: 560px; border-radius: 12px; padding: 18px; background: linear-gradient(180deg, var(--dark-secondary), rgba(0,0,0,0.02)); border: 1px solid var(--border-color); }

    /* small helpers */
    .muted { color: var(--text-muted); font-size: 0.95rem; }
    .small { font-size: 0.85rem; color: var(--text-muted); }

   /* Navbar Styles - Fixed with higher specificity
.navbar-trade {
  background-color: var(--dark-primary) !important;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3) !important;
  padding: 0.9rem 0 !important;
  transition: all 0.3s ease !important;
  border-bottom: 1px solid var(--border-color) !important;
}

.navbar-trade .navbar-brand {
  font-weight: 700 !important;
  font-size: 1.5rem !important;
  color: var(--gold-primary) !important;
  display: flex !important;
  align-items: center !important;
}

.navbar-trade .navbar-brand i {
  margin-right: 8px !important;
  font-size: 1.8rem !important;
  color: var(--gold-primary) !important;
} */

/* Fix for navbar links */
/* .navbar-trade .navbar-nav .nav-link {
  color: var(--text-light) !important;
  font-weight: 500 !important;
  padding: 0.5rem 1rem !important;
  margin: 0 0.2rem !important;
  border-radius: 4px !important;
  transition: all 0.2s ease !important;
}

.navbar-trade .navbar-nav .nav-link:hover,
.navbar-trade .navbar-nav .nav-link:focus {
  background-color: var(--gold-primary) !important;
  color: var(--dark-primary) !important;
}

.navbar-trade .navbar-nav .nav-link.active {
  background-color: var(--gold-dark) !important;
  color: var(--dark-primary) !important;
  font-weight: 600 !important;
}

.navbar-trade .navbar-nav .nav-link.active:hover {
  background-color: var(--gold-secondary) !important;
  color: var(--dark-primary) !important;
} */

/* Dropdown fixes */
/* .navbar-trade .dropdown-menu {
  background-color: var(--dark-secondary) !important;
  border: 1px solid var(--border-color) !important;
  border-radius: 8px !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
  padding: 0.5rem 0 !important;
}

.navbar-trade .dropdown-item {
  padding: 0.7rem 1.5rem !important;
  color: var(--text-light) !important;
  transition: all 0.2s ease !important;
}

.navbar-trade .dropdown-item:hover {
  background-color: var(--dark-tertiary) !important;
  color: var(--gold-primary) !important;
} */

/* Button fixes */
/* .navbar-trade .btn-signup .sign{
  background: var(--gold-gradient) !important;
  color: var(--dark-primary) !important;
  border: none !important;
  border-radius: 24px !important;
  padding: 0.5rem 1.5rem !important;
  font-weight: 600 !important;
  transition: all 0.2s ease !important;
  box-shadow: 0 2px 8px rgba(255, 215, 0, 0.3) !important;
  text-decoration: none !important;
  display: block !important;
}

.navbar-trade .btn-signup .sign:hover {
  background: var(--gold-secondary) !important;
  transform: translateY(-2px) !important;
  box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4) !important;
}

.navbar-trade .btn-login .log {
  background-color: transparent !important;
  color: var(--gold-primary) !important;
  border: 1px solid var(--gold-primary) !important;
  border-radius: 24px !important;
  padding: 0.5rem 1.5rem !important;
  font-weight: 600 !important;
  transition: all 0.2s ease !important;
  text-decoration: none !important;
  display: block !important;
}

.navbar-trade .btn-login .log:hover {
  background-color: rgba(255, 215, 0, 0.1) !important;
  border-color: var(--gold-secondary) !important;
  transform: translateY(-1px) !important;
} */

/* Toggler fixes */
/* .navbar-trade .navbar-toggler {
  border: 1px solid var(--gold-primary) !important;
  background: transparent !important;
}

.navbar-trade .navbar-toggler-icon {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 215, 0, 0.8%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e") !important;
} */

/* Mobile responsiveness for navbar */
/* @media (max-width: 991.98px) {
  .navbar-trade .navbar-collapse {
    background: var(--dark-secondary) !important;
    border-radius: 8px !important;
    padding: 1rem !important;
    margin-top: 1rem !important;
    border: 1px solid var(--border-color) !important;
  }
  
  .navbar-trade .navbar-nav .nav-link {
    margin: 0.2rem 0 !important;
    color: var(--text-light) !important;
  }
  
  .navbar-trade .btn-login,
  .navbar-trade .btn-signup {
    margin: 0.5rem 0 !important;
    width: 100% !important;
    text-align: center !important;
  }
   */
  /* Fix for dropdown menu on mobile */
  /* .navbar-trade .dropdown-menu {
    background-color: var(--dark-tertiary) !important;
    border: none !important;
    border-radius: 6px !important;
    margin: 0.5rem 0 !important;
    max-height: 300px !important;
    overflow-y: auto !important;
    padding: 0.5rem 0 !important;
    position: static !important;
    float: none !important;
    width: 100% !important;
    box-shadow: none !important;
  }
  
  .navbar-trade .dropdown-item {
    padding: 0.6rem 1rem !important;
    font-size: 0.95rem !important;
    color: var(--text-light) !important;
  }
  
  .navbar-trade .dropdown-menu.show {
    display: block !important;
    margin-bottom: 1rem !important;
  } */
  
  /* Add scrollbar styling for dropdown */
  /* .navbar-trade .dropdown-menu::-webkit-scrollbar {
    width: 6px !important;
  }
  
  .navbar-trade .dropdown-menu::-webkit-scrollbar-track {
    background: var(--dark-secondary) !important;
    border-radius: 3px !important;
  }
  
  .navbar-trade .dropdown-menu::-webkit-scrollbar-thumb {
    background: var(--gold-primary) !important;
    border-radius: 3px !important;
  }
  
  .navbar-trade .dropdown-menu::-webkit-scrollbar-thumb:hover {
    background: var(--gold-secondary) !important;
  }
} */

/* Extra small devices (phones, 576px and down) */
@media (max-width: 576px) {
  .navbar-trade .dropdown-menu {
    max-height: 250px !important;
  }
  
  .navbar-trade .dropdown-item {
    padding: 0.5rem 0.8rem !important;
    font-size: 0.9rem !important;
  }
}
    /* Footer Styles */
    .footer {
      background: var(--gold-gradient);
      color: var(--dark-primary);
      padding: 70px 0 0;
      position: relative;
      overflow: hidden;
    }

    .footer::before,
    .footer::after {
      content: '';
      position: absolute;
      inset: 0;
      z-index: 1;
    }

    .footer::before {
      background: 
        radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 60%),
        radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.05) 0%, transparent 60%);
    }

    .footer::after {
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" fill="%230a0f1c" opacity="0.03"><circle cx="20" cy="20" r="2"/><circle cx="50" cy="80" r="1.5"/><circle cx="80" cy="40" r="1"/><circle cx="90" cy="90" r="1.5"/></svg>');
      background-size: cover;
    }

    .footer-content {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      flex-wrap: wrap;
      gap: 40px;
      position: relative;
      z-index: 2;
      margin-bottom: 50px;
    }

    .footer-section {
      flex: 1;
      min-width: 240px;
    }

    .footer-section h3 {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--dark-primary);
      margin-bottom: 18px;
      position: relative;
      padding-bottom: 6px;
    }

    .footer-section h3::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: 0;
      width: 40px;
      height: 2px;
      background: var(--dark-primary);
      border-radius: 2px;
    }

    .footer-brand .foot {
      font-size: 2rem;
      font-weight: 800;
      color: var(--dark-primary);
      text-decoration: none;
      transition: transform 0.3s ease;
      display: inline-block;
    }

    .footer-brand .foot:hover {
      transform: translateY(-2px);
    }

    .footer-links {
      list-style: none;
      padding: 0;
    }

    .footer-links li {
      margin-bottom: 10px;
    }

    .footer-links a {
      color: var(--dark-primary);
      text-decoration: none;
      font-weight: 500;
      opacity: 0.9;
      display: flex;
      align-items: center;
      transition: all 0.3s ease;
    }

    .footer-links a:hover {
      opacity: 1;
      transform: translateX(5px);
    }

    .contact-info {
      list-style: none;
      padding: 0;
    }

    .contact-info li {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
      color: var(--dark-primary);
    }

    .social-links {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }

    .social-links a {
      width: 42px;
      height: 42px;
      border-radius: 50%;
      background: var(--dark-primary);
      color: var(--gold-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .social-links a:hover {
      background: transparent;
      color: var(--dark-primary);
      border: 2px solid var(--dark-primary);
      transform: translateY(-3px);
    }

    .newsletter-form {
      display: flex;
      align-items: stretch;
      background: var(--dark-primary);
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      height: 52px;
      min-width: 320px;
    }

    .newsletter-form input {
      flex: 1;
      border: none;
      outline: none;
      background: transparent;
      color: var(--text-light);
      padding: 0 15px;
      font-size: 1rem;
      min-width: 0;
    }

    .newsletter-form input::placeholder {
      color: var(--text-muted);
    }

    .newsletter-form button {
      background: var(--gold-primary);
      color: var(--dark-primary);
      border: none;
      padding: 0 25px;
      font-weight: 700;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s ease;
      white-space: nowrap;
    }

    .newsletter-form button:hover {
      background: var(--gold-secondary);
    }

    .footer-bottom {
      background: var(--dark-primary);
      padding: 25px 0;
      position: relative;
      z-index: 2;
    }

    .footer-bottom-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
    }

    .footer-bottom p {
      color: var(--gold-primary);
      font-size: 0.95rem;
      margin: 0;
    }

    .payment-methods {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .payment-methods i {
      font-size: 1.6rem;
      color: var(--gold-primary);
      opacity: 0.8;
      transition: 0.3s ease;
    }

    .payment-methods i:hover {
      opacity: 1;
      color: var(--gold-secondary);
      transform: translateY(-2px);
    }

    .legal-links {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
    }

    .legal-links a {
      color: var(--gold-primary);
      text-decoration: none;
      opacity: 0.8;
      transition: all 0.3s ease;
    }

    .legal-links a:hover {
      opacity: 1;
      color: var(--gold-secondary);
      text-decoration: underline;
    }

    /* responsive */
    /* @media (max-width: 768px) {
      .hero { padding: 80px 12px 36px; }
      .stock-price { font-size: 1.25rem; }
    } */

    /* Mobile responsiveness for navbar */
    @media (max-width: 991.98px) {
      /* .navbar-trade .navbar-nav {
        background: var(--dark-secondary);
        border-radius: 8px;
        padding: 1rem;
        margin-top: 1rem;
        border: 1px solid var(--border-color);
      }
      
      .navbar-trade .navbar-nav .nav-link {
        margin: 0.2rem 0;
      }
      
      .navbar-trade .btn-login,
      .navbar-trade .btn-signup {
        margin: 0.5rem 0;
        width: 100%;
        text-align: center;
      }
      
      .navbar-trade .dropdown-menu {
        background-color: var(--dark-tertiary);
        border: none;
        border-radius: 6px;
        margin: 0.5rem 0;
        max-height: 300px;
        overflow-y: auto;
        padding: 0.5rem 0;
        position: static;
        float: none;
        width: 100%;
        box-shadow: none;
      }
      
      .navbar-trade .dropdown-item {
        padding: 0.6rem 1rem;
        font-size: 0.95rem;
      }
      
      .navbar-trade .dropdown-menu.show {
        display: block;
        margin-bottom: 1rem;
      }
      
      .navbar-trade .dropdown-menu::-webkit-scrollbar {
        width: 6px;
      }
      
      .navbar-trade .dropdown-menu::-webkit-scrollbar-track {
        background: var(--dark-secondary);
        border-radius: 3px;
      }
      
      .navbar-trade .dropdown-menu::-webkit-scrollbar-thumb {
        background: var(--gold-primary);
        border-radius: 3px;
      }
      
      .navbar-trade .dropdown-menu::-webkit-scrollbar-thumb:hover {
        background: var(--gold-secondary);
      } */
    }

    @media (max-width: 576px) {
      /* .navbar-trade .dropdown-menu {
        max-height: 250px;
      }
      
      .navbar-trade .dropdown-item {
        padding: 0.5rem 0.8rem;
        font-size: 0.9rem;
      } */

      .footer {
        padding: 50px 0 0;
      }

      .footer-section h3 {
        font-size: 1.1rem;
      }

      .footer-brand .foot {
        font-size: 1.8rem;
      }

      .social-links a {
        width: 38px;
        height: 38px;
      }

      .newsletter-form {
        flex-direction: column;
        height: auto;
        border-radius: 10px;
      }

      .newsletter-form input {
        padding: 12px 15px;
        background: rgba(255, 255, 255, 0.9);
        color: var(--dark-primary);
      }

      .newsletter-form button {
        width: 100%;
        padding: 12px;
        border-radius: 0 0 10px 10px;
      }
    }

    @media (max-width: 992px) {
      .footer-content {
        flex-wrap: wrap;
        justify-content: center;
        text-align: center;
      }

      .footer-section {
        min-width: 300px;
      }

      .newsletter-form {
        width: 100%;
        max-width: 420px;
        margin: 10px auto 0;
      }

      .social-links {
        justify-content: center;
      }

      .footer-bottom-content {
        flex-direction: column;
        text-align: center;
        gap: 12px;
      }
    }
  </style>
</head>
<body data-theme="dark">

  <!-- PAGE WRAPPER -->
  <div class="min-h-screen">

    <!-- Bootstrap Navbar -->

 <nav class="navbar navbar-expand-lg navbar-trade fixed-top mb-0">
    <div class="container">
        <a class="navbar-brand" href="#">
            InvestHub
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="/index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/invest.html">Invest</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/cashcard.html">Cash Card</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        What We Offer
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="/invest.html">Invest</a></li>
                        <li><a class="dropdown-item" href="#">Trading</a></li>
                        <li><a class="dropdown-item" href="#">Banking</a></li>
                        <li><a class="dropdown-item" href="/stock.html">Stocks & ETFs</a></li>
                        <li><a class="dropdown-item" href="#">Options</a></li>
                        <li><a class="dropdown-item" href="#">Crypto</a></li>
                    </ul>
                </li>
                 <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                      Others
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="/testimonial.html">Testimonials</a></li>
                        <li><a class="dropdown-item" href="/faq.html">FAQ</a></li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/learn.html">Learn</a>
                </li>
            </ul>
            <div class="d-flex btn-container">
                <button class="btn btn-login me-2 "><a href="/login.html" class="log">Log in</a></button>
                <button class="btn btn-signup"><a href="./signup.html" class="sign">Sign up</a></button>
            </div>
        </div>
    </div>
</nav>
    <!-- HERO -->
    <section class="hero">
      <div class="hero-bg"></div>
      <div class="container hero-inner">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-6">
          <div>
            <div class="inline-block px-4 py-2 rounded-full btn-gold small">Advanced Trading Platform</div>
            <h1 class="mt-6 text-4xl md:text-5xl font-extrabold glow">Stocks & ETFs â€” InvestHub</h1>
            <p class="mt-3 max-w-2xl muted">Real-time charts, curated ETFs, and pro trading tools. Add symbols to your watchlist, buy/sell in a simulated modal, and switch charts with the TradingView selector.</p>
            <div class="mt-6 flex gap-3">
              <button id="startTradeBtn" class="btn-gold">Get Started</button>
              <button id="demoBtn" class="btn-ghost">Schedule Demo</button>
            </div>
          </div>

          <div class="w-full md:w-1/3">
            <div class="card">
              <div class="flex justify-between items-start gap-4">
                <div>
                  <div class="muted">Portfolio Value</div>
                  <div class="text-2xl font-extrabold">$<span id="portfolioValue">12,340</span></div>
                  <div class="small mt-1">Unrealized P/L <span class="stock-change-up">+2.1%</span></div>
                </div>
                <div class="text-right">
                  <div class="small muted">Welcome back</div>
                  <div class="font-semibold">Trader</div>
                  <button id="themeToggle" class="mt-3 btn-ghost small"><i class="fa fa-moon"></i> Toggle Theme</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- small performance summary -->
        <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="card flex items-center justify-between p-4">
            <div>
              <div class="small muted">Global Market Cap</div>
              <div class="text-xl font-bold">$<span id="globalCap">43,200,000,000,000</span></div>
            </div>
            <div class="text-right">
              <div class="small muted">24h Volume</div>
              <div class="font-bold">$<span id="vol">298,000,000,000</span></div>
            </div>
          </div>

          <div class="card p-4">
            <div class="small muted">Top Movers</div>
            <div class="mt-2 flex flex-col gap-1">
              <div class="text-sm"><span class="font-semibold">NVDA</span> <span class="stock-change-up">+4.2%</span></div>
              <div class="text-sm"><span class="font-semibold">TSLA</span> <span class="stock-change-up">+3.8%</span></div>
            </div>
          </div>

          <div class="card p-4">
            <div class="small muted">Active ETFs</div>
            <div class="mt-2 font-bold">1,470</div>
          </div>
        </div>
      </div>
    </section>

    <!-- TICKER -->
    <div class="ticker">
      <div class="container">
        <div class="ticker-track" id="tickerTrack">
          <!-- items will be inserted by JS -->
        </div>
      </div>
    </div>

    <!-- MAIN CONTENT -->
    <main class="container px-4 md:px-0 py-10">

      <!-- Market Performance Chart + selector -->
      <section class="mb-12">
        <div class="flex flex-col lg:flex-row gap-6">
          <div class="flex-1 card p-6">
            <div class="flex items-center justify-between mb-4">
              <h3 class="font-bold glow">Market Performance</h3>
              <div class="flex items-center gap-3">
                <select id="perfSelector" class="rounded px-2 py-1 bg-transparent border border-var(--border-color) small text-sm">
                  <option value="stocks">Top Stocks</option>
                  <option value="etfs">Top ETFs</option>
                </select>
                <button id="refreshPerf" class="btn-ghost small"><i class="fa fa-sync"></i> Refresh</button>
              </div>
            </div>
            <canvas id="perfChart" height="120"></canvas>
          </div>

          <!-- Watchlist / Add -->
          <aside class="w-full lg:w-72">
            <div class="card p-4">
              <div class="flex items-center justify-between mb-3">
                <h4 class="font-semibold">Watchlist</h4>
                <button id="clearWatch" class="btn-ghost small">Clear</button>
              </div>

              <div class="mb-3">
                <input id="addSymbolInput" type="text" placeholder="Add symbol (e.g. AAPL)" class="w-full bg-transparent border border-var(--border-color) rounded px-3 py-2 small" />
                <div class="flex gap-2 mt-3">
                  <button id="addSymbolBtn" class="btn-gold small w-full">Add</button>
                </div>
              </div>

              <div id="watchlistContainer" class="flex flex-col gap-2 max-h-64 overflow-auto">
                <!-- watchlist items come here -->
              </div>
            </div>
          </aside>
        </div>
      </section>

      <!-- Stocks grid -->
      <section id="stocksSection" class="mb-12">
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-2xl font-bold glow">Featured Stocks</h2>
          <div class="muted small">Select a card to open buy/sell modal</div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <!-- cards: will be filled by JS so we can maintain data easily -->
        </div>
      </section>

      <!-- ETFs -->
      <section id="etfsSection" class="mb-12">
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-2xl font-bold glow">Smart ETFs</h2>
          <div class="muted small">Diversify with these curated ETFs</div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <!-- ETF cards added by JS -->
        </div>
      </section>

      <!-- TradingView interactive widget -->
      <section class="mb-12">
        <h2 class="text-2xl font-bold glow mb-4">Live Trading View</h2>
        <div class="trading-view">
          <div class="trading-header flex items-center justify-between p-4 border-b" style="border-color:var(--border-color)">
            <div class="flex items-center gap-3">
              <div class="text-lg font-bold" id="tvCurrentSymbol">AAPL</div>
              <div class="small muted" id="tvSymbolChange">+1.2%</div>
            </div>

            <div class="flex items-center gap-3">
              <select id="tvInterval" class="small bg-transparent border border-var(--border-color) rounded px-2 py-1">
                <option value="1">1</option>
                <option value="5">5</option>
                <option value="15">15</option>
                <option value="60">60</option>
                <option value="D" selected>D</option>
              </select>
              <button id="openSymbolSearch" class="btn-ghost small"><i class="fa fa-search"></i> Search Symbol</button>
            </div>
          </div>

          <div id="tvWidget" class="p-0" style="height:520px;">
            <!-- TradingView widget will be injected here -->
          </div>
        </div>
      </section>

      <!-- Tools -->
      <section class="mb-12">
        <h2 class="text-2xl font-bold glow mb-4">Trading Tools</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          <div class="tool-card">
            <div class="text-3xl mb-3"><i class="fa fa-chart-candlestick"></i></div>
            <h4 class="font-semibold">Advanced Charts</h4>
            <p class="small muted mt-2">50+ indicators, multi-timeframe, drawing tools.</p>
          </div>
          <div class="tool-card">
            <div class="text-3xl mb-3"><i class="fa fa-robot"></i></div>
            <h4 class="font-semibold">AI Signals</h4>
            <p class="small muted mt-2">AI-backed trade ideas & sentiment analysis.</p>
          </div>
          <div class="tool-card">
            <div class="text-3xl mb-3"><i class="fa fa-bell"></i></div>
            <h4 class="font-semibold">Smart Alerts</h4>
            <p class="small muted mt-2">Price, volume, and pattern alerts delivered instantly.</p>
          </div>
          <div class="tool-card">
            <div class="text-3xl mb-3"><i class="fa fa-shield-alt"></i></div>
            <h4 class="font-semibold">Risk Tools</h4>
            <p class="small muted mt-2">Portfolio risk metrics and auto-stop-loss options.</p>
          </div>
        </div>
      </section>

      <!-- CTA -->
      <section class="mb-20">
        <div class="card p-8 text-center">
          <h3 class="text-2xl font-bold glow">Ready to trade smarter?</h3>
          <p class="muted mt-2">Create an account and start trading with professional tools and zero commission in our simulated demo.</p>
          <div class="mt-5 flex justify-center gap-3">
            <button class="btn-gold" id="ctaCreate">Create Free Account</button>
            <button class="btn-ghost" id="ctaDemo">Request Demo</button>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer Ticker (small) -->
    <div class="ticker mt-auto">
      <div class="container">
        <div class="ticker-track" id="tickerTrackBottom"></div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h2 class="footer-brand mb-15"><a href="#" class="foot">InvestHub</a></h2>
          <p class="firstp">We are a leading trading platform providing access to global markets, advanced
            trading tools, and educational resources for traders of all experience levels.</p>
          <div class="social-links">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-linkedin-in"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-youtube"></i></a>
          </div>
        </div>

        <div class="footer-section">
          <h3>Quick Links</h3>
          <ul class="footer-links">
            <li><a href="#"><i class="fas fa-chevron-right"></i> Trading Platforms</a></li>
            <li><a href="#"><i class="fas fa-chevron-right"></i> Market Analysis</a></li>
            <li><a href="#"><i class="fas fa-chevron-right"></i> Investment Products</a></li>
            <li><a href="#"><i class="fas fa-chevron-right"></i> Trading Education</a></li>
            <li><a href="#"><i class="fas fa-chevron-right"></i> Economic Calendar</a></li>
          </ul>
        </div>

        <div class="footer-section">
          <h3>Contact Us</h3>
          <ul class="contact-info">
            <li>
              <i class="fas fa-map-marker-alt"></i>
              <div>
                <strong>Headquarters</strong><br>
                123 Financial District,<br>
                New York, NY 10005
              </div>
            </li>
            <li>
              <i class="fas fa-phone"></i>
              <div>
                <strong>Phone</strong><br>
                +1 (555) 123-4567
              </div>
            </li>
            <li>
              <i class="fas fa-envelope"></i>
              <div>
                <strong>Email</strong><br>
                support@investhub.com
              </div>
            </li>
          </ul>
        </div>

        <div class="footer-section">
          <h3>Newsletter</h3>
          <p>Subscribe to our newsletter for market insights, trading tips, and platform updates.</p>
          <form class="newsletter-form">
            <input type="email" placeholder="Your email address" required>
            <button type="submit">Subscribe</button>
          </form>
        </div>
      </div>
    </div>

    <div class="footer-bottom">
      <div class="container">
        <div class="footer-bottom-content">
          <p>&copy; 2024 InvestHub. All rights reserved.</p>

          <div class="payment-methods">
            <i class="fab fa-cc-visa"></i>
            <i class="fab fa-cc-mastercard"></i>
            <i class="fab fa-cc-paypal"></i>
            <i class="fab fa-cc-apple-pay"></i>
          </div>

          <div class="legal-links">
            <a href="#">Privacy Policy</a>
            <a href="#">Terms of Service</a>
            <a href="#">Risk Disclosure</a>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <!-- MODALS (hidden by default) -->
  <div id="modalRoot" style="display:none;"></div>

  <script>
  /************************************************************************
   * Client-side data & initialization (no backend)
   ************************************************************************/

  // --- Default data (can be replaced with real API data later) ---
  const initialStocks = [
    { symbol: 'AAPL', name: 'Apple Inc.', exchange: 'NASDAQ', price: 178.72 },
    { symbol: 'TSLA', name: 'Tesla Inc.', exchange: 'NASDAQ', price: 245.18 },
    { symbol: 'MSFT', name: 'Microsoft Corp.', exchange: 'NASDAQ', price: 374.51 },
    { symbol: 'NVDA', name: 'NVIDIA Corp.', exchange: 'NASDAQ', price: 473.20 },
    { symbol: 'AMZN', name: 'Amazon.com Inc.', exchange: 'NASDAQ', price: 132.14 },
    { symbol: 'GOOGL', name: 'Alphabet Inc.', exchange: 'NASDAQ', price: 132.75 }
  ];

  const initialETFs = [
    { ticker: 'SPY', title:'SPDR S&P 500 ETF', expense:'0.09%', aum:'$452B', ytd:'+12.5%' },
    { ticker: 'QQQ', title:'Invesco QQQ Trust', expense:'0.20%', aum:'$200B', ytd:'+14.2%' },
    { ticker: 'VTI', title:'Vanguard Total Stock Market', expense:'0.03%', aum:'$350B', ytd:'+11.0%' }
  ];

  // --- watchlist persisted in localStorage ---
  const WATCH_KEY = 'investhub_watchlist_v1';
  let watchlist = JSON.parse(localStorage.getItem(WATCH_KEY)) || ['AAPL','TSLA','VTI'];

  // --- theme persistence ---
  const THEME_KEY = 'investhub_theme_v1';
  const savedTheme = localStorage.getItem(THEME_KEY) || 'dark';
  document.documentElement.setAttribute('data-theme', savedTheme);
  updateThemeIcon(savedTheme);

  /************************************************************************
   * Utilities
   ************************************************************************/
  function $ (sel, ctx=document) { return ctx.querySelector(sel); }
  function $$ (sel, ctx=document) { return Array.from(ctx.querySelectorAll(sel)); }
  function formatMoney(n) { return Number(n).toLocaleString(undefined, {maximumFractionDigits:0}); }
  function formatPrice(n) { return Number(n).toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2}); }

  /************************************************************************
   * Ticker Generation
   ************************************************************************/
  const topTickerSymbols = ['AAPL','TSLA','NVDA','MSFT','AMZN','GOOGL','META','SPY','QQQ','VTI'];
  function renderTicker() {
    const t1 = $('#tickerTrack');
    const t2 = $('#tickerTrackBottom');
    const items = topTickerSymbols.map(s => {
      const change = (Math.random()*4-1).toFixed(2);
      const up = change >= 0;
      return `<div class="ticker-item"><strong>${s}</strong> <span class="${up? 'stock-change-up':'stock-change-down'}">${up?'+':''}${change}%</span></div>`;
    }).join('');
    // duplicate to create long track for smooth scroll
    t1.innerHTML = items + items;
    t2.innerHTML = items + items;
  }
  renderTicker();

  /************************************************************************
   * Perf Chart (Chart.js)
   ************************************************************************/
  const perfCtx = document.getElementById('perfChart').getContext('2d');
  let perfChart;
  function initPerfChart(type='stocks') {
    const labels = type === 'stocks' ? ['AAPL','MSFT','GOOGL','TSLA','AMZN'] : ['VTI','SPY','QQQ','IVV','DIA'];
    const data = type === 'stocks' ? [2.1,1.8,1.2,3.5,2.9] : [1.1,0.9,1.7,0.8,1.3];
    if (perfChart) { perfChart.destroy(); }
    perfChart = new Chart(perfCtx, {
      type: 'bar',
      data: { labels, datasets: [{ label: 'Daily Performance (%)', data, backgroundColor:'rgba(236,201,6,0.5)', borderColor:'#ecc906dc', borderWidth:1 }] },
      options: {
        responsive:true,
        scales: {
          x: { ticks: { color: getComputedStyle(document.documentElement).getPropertyValue('--text-muted') || '#a0aec0' } },
          y: { ticks: { color: getComputedStyle(document.documentElement).getPropertyValue('--text-muted') || '#a0aec0' } }
        },
        plugins: { legend: { labels: { color: getComputedStyle(document.documentElement).getPropertyValue('--text-light') || '#f8f9fa' } } }
      }
    });
  }
  initPerfChart('stocks');
  $('#perfSelector').addEventListener('change', e => initPerfChart(e.target.value));
  $('#refreshPerf').addEventListener('click', () => initPerfChart($('#perfSelector').value));

  /************************************************************************
   * Render Stocks & ETFs as cards
   ************************************************************************/
  const stocksGrid = document.querySelector('#stocksSection .grid');
  const etfsGrid = document.querySelector('#etfsSection .grid');

  function renderStocks() {
    stocksGrid.innerHTML = '';
    initialStocks.forEach(s => {
      const card = document.createElement('div');
      card.className = 'stock-card';
      card.innerHTML = `
        <div class="flex items-start justify-between">
          <div class="flex items-center gap-3">
            <div class="stock-logo">${s.symbol[0]}</div>
            <div>
              <div class="font-semibold">${s.name}</div>
              <div class="small muted">${s.exchange}</div>
            </div>
          </div>
          <div class="text-right">
            <div class="stock-price">$<span data-symbol="${s.symbol}">${formatPrice(s.price)}</span></div>
            <div class="small mt-1 stock-change ${Math.random()>0.5? 'stock-change-up':'stock-change-down'}"><i class="fa fa-arrow-up"></i> ${(Math.random()*4-1).toFixed(2)}%</div>
          </div>
        </div>
        <div class="mt-4 flex gap-2">
          <button class="btn-gold buy-btn" data-symbol="${s.symbol}" data-price="${s.price}"><i class="fa fa-cart-plus"></i> Buy</button>
          <button class="btn-ghost sell-btn" data-symbol="${s.symbol}" data-price="${s.price}"><i class="fa fa-money-bill-wave"></i> Sell</button>
          <button class="btn-ghost ml-auto add-watch" data-symbol="${s.symbol}"><i class="fa fa-star"></i> Watch</button>
        </div>
      `;
      // event listeners
      card.querySelector('.buy-btn').addEventListener('click', onBuyClick);
      card.querySelector('.sell-btn').addEventListener('click', onSellClick);
      card.querySelector('.add-watch').addEventListener('click', (ev) => {
        const sym = ev.currentTarget.dataset.symbol;
        addToWatchlist(sym);
      });
      stockCardHoverEffect(card);
      stocksGrid.appendChild(card);
    });
  }

  function renderETFs() {
    etfsGrid.innerHTML = '';
    initialETFs.forEach(e => {
      const el = document.createElement('div');
      el.className = 'etf-card';
      el.innerHTML = `
        <div class="flex items-center gap-4">
          <div class="etf-icon text-white rounded-lg flex items-center justify-center" style="width:64px;height:64px;background:linear-gradient(135deg,#00a3ff,#8b5cf6)"><i class="fa fa-chart-area"></i></div>
          <div>
            <div class="font-semibold">${e.title}</div>
            <div class="small muted">${e.ticker}</div>
          </div>
        </div>
        <p class="mt-4 small muted">${e.title} â€” Expense: ${e.expense} â€¢ AUM: ${e.aum}</p>
        <div class="etf-stats mt-4 grid grid-cols-2 gap-2">
          <div class="text-center"><div class="font-semibold">${e.ticker}</div><div class="small muted">Ticker</div></div>
          <div class="text-center"><div class="font-semibold">${e.expense}</div><div class="small muted">Expense</div></div>
        </div>
      `;
      etfsGrid.appendChild(el);
      // Add subtle 3d tilt on hover
      cardTiltEffect(el);
    });
  }

  // helper UI effects
  function stockCardHoverEffect(card) {
    card.addEventListener('mouseenter', () => {
      card.style.transform = 'translateY(-8px)';
      card.style.boxShadow = '0 20px 40px rgba(0,0,0,0.35)';
    });
    card.addEventListener('mouseleave', () => {
      card.style.transform = '';
      card.style.boxShadow = '';
    });
  }
  function cardTiltEffect(el) {
    el.addEventListener('mousemove', (ev) => {
      const r = el.getBoundingClientRect();
      const cx = r.left + r.width/2;
      const cy = r.top + r.height/2;
      const dx = (ev.clientX - cx)/r.width;
      const dy = (ev.clientY - cy)/r.height;
      el.style.transform = `perspective(900px) rotateX(${ -dy * 6 }deg) rotateY(${ dx * 6 }deg) translateY(-8px)`;
    });
    el.addEventListener('mouseleave', () => {
      el.style.transform = '';
    });
  }

  renderStocks();
  renderETFs();

  /************************************************************************
   * Watchlist (add/remove/persist)
   ************************************************************************/
  const watchlistContainer = document.getElementById('watchlistContainer');
  function renderWatchlist() {
    watchlistContainer.innerHTML = '';
    if (!watchlist || watchlist.length === 0) {
      watchlistContainer.innerHTML = '<div class="small muted">No symbols in your watchlist â€” add one.</div>';
      return;
    }
    watchlist.forEach(sym => {
      const item = document.createElement('div');
      item.className = 'flex items-center justify-between card small';
      // find latest price from initialStocks if exists, otherwise random
      const match = initialStocks.find(s=> s.symbol === sym);
      const price = match ? match.price : (100 + Math.random()*300).toFixed(2);
      const change = ((Math.random()*4)-1).toFixed(2);
      item.innerHTML = `
        <div class="flex items-center gap-3">
          <div class="stock-logo" style="width:44px;height:44px">${sym[0]}</div>
          <div>
            <div class="font-semibold">${sym}</div>
            <div class="small muted">$${formatPrice(price)}</div>
          </div>
        </div>
        <div class="flex items-center gap-2">
          <div class="${change>=0 ? 'stock-change-up' : 'stock-change-down'} small">${change>=0?'+':''}${change}%</div>
          <button class="btn-ghost small view-symbol" data-symbol="${sym}">View</button>
          <button class="btn-ghost small remove-watch" data-symbol="${sym}">Remove</button>
        </div>
      `;
      item.querySelector('.remove-watch').addEventListener('click', (e) => {
        const s = e.currentTarget.dataset.symbol;
        watchlist = watchlist.filter(w => w !== s);
        localStorage.setItem(WATCH_KEY, JSON.stringify(watchlist));
        renderWatchlist();
      });
      item.querySelector('.view-symbol').addEventListener('click', (e) => {
        const s = e.currentTarget.dataset.symbol;
        // switch TradingView to symbol
        openTradingViewWithSymbol(s);
      });
      watchlistContainer.appendChild(item);
    });
  }
  renderWatchlist();

  // Add symbol UI
  $('#addSymbolBtn').addEventListener('click', () => {
    const val = $('#addSymbolInput').value.trim().toUpperCase();
    if (!val) return alert('Enter a symbol (e.g. AAPL)');
    addToWatchlist(val);
    $('#addSymbolInput').value = '';
  });
  $('#addSymbolInput').addEventListener('keyup', (e) => { if (e.key === 'Enter') $('#addSymbolBtn').click(); });

  function addToWatchlist(sym) {
    if (watchlist.includes(sym)) {
      toast(`${sym} already in watchlist`);
      return;
    }
    watchlist.unshift(sym);
    if (watchlist.length > 24) watchlist.pop();
    localStorage.setItem(WATCH_KEY, JSON.stringify(watchlist));
    renderWatchlist();
    toast(`${sym} added to watchlist`);
  }

  $('#clearWatch').addEventListener('click', () => {
    if (!confirm('Clear your watchlist?')) return;
    watchlist = [];
    localStorage.setItem(WATCH_KEY, JSON.stringify(watchlist));
    renderWatchlist();
  });

  /************************************************************************
   * Buy / Sell modal behavior
   ************************************************************************/
  const modalRoot = document.getElementById('modalRoot');

  function openModal(htmlContent) {
    modalRoot.innerHTML = `
      <div class="modal-bg" id="modalBg">
        <div class="modal">${htmlContent}</div>
      </div>`;
    modalRoot.style.display = 'block';
    // close on background click
    $('#modalBg').addEventListener('click', (e) => {
      if (e.target.id === 'modalBg') closeModal();
    });
  }

  function closeModal() {
    modalRoot.style.display = 'none';
    modalRoot.innerHTML = '';
  }

  function onBuyClick(e) {
    const sym = e.currentTarget.dataset.symbol;
    const price = Number(e.currentTarget.dataset.price);
    showTradeModal('Buy', sym, price);
  }
  function onSellClick(e) {
    const sym = e.currentTarget.dataset.symbol;
    const price = Number(e.currentTarget.dataset.price);
    showTradeModal('Sell', sym, price);
  }

  function showTradeModal(side, symbol, price) {
    const html = `
      <div class="flex justify-between items-center mb-4">
        <div><h3 class="font-bold">${side} ${symbol}</h3><div class="small muted">Simulated trade</div></div>
        <div class="small muted">Market Price: $${formatPrice(price)}</div>
      </div>
      <div>
        <label class="small muted">Quantity</label>
        <input id="tradeQty" type="number" min="1" value="1" class="w-full bg-transparent border border-var(--border-color) rounded px-3 py-2 mt-1" />
      </div>
      <div class="mt-4 flex gap-2">
        <button id="confirmTrade" class="btn-gold">${side}</button>
        <button id="cancelTrade" class="btn-ghost">Cancel</button>
      </div>
    `;
    openModal(html);
    $('#cancelTrade').addEventListener('click', closeModal);
    $('#confirmTrade').addEventListener('click', () => {
      const qty = Number($('#tradeQty').value);
      if (!qty || qty <= 0) return alert('Enter a valid quantity');
      // Simulate trade effect: update portfolio value
      const delta = (side === 'Buy' ? 1 : -1) * qty * price * 0.01; // tiny effect
      const pvEl = $('#portfolioValue');
      let pv = Number(pvEl.textContent.replace(/,/g,''));
      pv += delta;
      pvEl.textContent = Math.round(pv);
      toast(`${side} ${qty} ${symbol} @ $${formatPrice(price)} â€” simulated`);
      closeModal();
    });
  }

  function toast(msg, time=2300) {
    const t = document.createElement('div');
    t.className = 'fixed right-6 bottom-6 bg-black/60 text-white px-4 py-2 rounded shadow-lg z-50';
    t.textContent = msg;
    document.body.appendChild(t);
    setTimeout(()=> t.style.opacity = '0.01', time);
    setTimeout(()=> t.remove(), time+400);
  }

  /************************************************************************
   * TradingView integration (symbol selector + widget)
   ************************************************************************/
  let tvWidget = null;
  let currentTVSymbol = 'AAPL';

  function initTradingView(symbol='AAPL', interval='D', theme='dark') {
    // remove previous
    if (tvWidget) {
      try { tvWidget.remove(); } catch(e) {}
      document.getElementById('tvWidget').innerHTML = '';
    }
    currentTVSymbol = symbol;
    $('#tvCurrentSymbol').textContent = symbol;
    // TradingView widget config
    // allow_symbol_change: true -> adds symbol search in widget
    tvWidget = new TradingView.widget({
      autosize: true,
      symbol: symbol.startsWith('FOREX') ? symbol : 'NASDAQ:' + symbol, // default to NASDAQ if not prefixed
      interval: interval || 'D',
      timezone: 'Etc/UTC',
      theme: (document.documentElement.getAttribute('data-theme') === 'light') ? 'light' : 'dark',
      style: '1',
      locale: 'en',
      toolbar_bg: (document.documentElement.getAttribute('data-theme') === 'light') ? '#fff' : '#0b1220',
      enable_publishing: false,
      allow_symbol_change: true,
      container_id: 'tvWidget',
      // custom feature: when user changes symbol inside widget, we update tvCurrentSymbol
      overrides: {}
    });

    // There's no proper event callback from this anonymous widget for symbol change in public API,
    // but we will provide an external symbol search too to allow switching:
  }

  // show symbol search prompt (simple implementation)
  $('#openSymbolSearch').addEventListener('click', () => {
    const s = prompt('Enter a symbol to view (e.g. AAPL, MSFT, SPY):', currentTVSymbol || 'AAPL');
    if (s) openTradingViewWithSymbol(s.trim().toUpperCase());
  });

  function openTradingViewWithSymbol(sym) {
    const chosen = sym;
    // Attempt to map to exchange: if it matches major ones keep as-is
    // We'll let TradingView resolve the symbol. Use "NASDAQ:" prefix by default.
    initTradingView(chosen, $('#tvInterval').value);
  }

  // init with default
  initTradingView('AAPL', 'D', savedTheme);

  // change interval
  $('#tvInterval').addEventListener('change', (e) => {
    initTradingView(currentTVSymbol, e.target.value);
  });

  /************************************************************************
   * Simulated price updates for stock cards (and reflect on watchlist)
   ************************************************************************/
  function simulatePriceFluctuations() {
    // Update each displayed stock price randomly
    $$('.stock-price span').forEach(span => {
      const sym = span.dataset.symbol;
      let base = initialStocks.find(s => s.symbol === sym)?.price || (100 + Math.random()*200);
      // small random drift
      const changePct = (Math.random()*2 - 1) * 0.02; // +/-2%
      base = base * (1 + changePct);
      span.textContent = formatPrice(base);
    });
  }
  setInterval(simulatePriceFluctuations, 8000);

  /************************************************************************
   * Light/Dark Toggle
   ************************************************************************/
  $('#themeToggle').addEventListener('click', () => {
    const current = document.documentElement.getAttribute('data-theme') || 'dark';
    const next = current === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', next);
    localStorage.setItem(THEME_KEY, next);
    updateThemeIcon(next);
    // re-init tradingview to apply theme
    initTradingView(currentTVSymbol, $('#tvInterval').value, next);
  });

  function updateThemeIcon(theme) {
    const t = $('#themeToggle');
    if (!t) return;
    t.innerHTML = theme === 'dark' ? '<i class="fa fa-sun"></i> Light' : '<i class="fa fa-moon"></i> Dark';
  }

  /************************************************************************
   * Init & GSAP Animations
   ************************************************************************/
  document.addEventListener('DOMContentLoaded', () => {
    // animate hero content
    gsap.from('.hero .btn-gold', { y: -18, opacity:0, duration: 0.8 });
    gsap.from('.hero h1', { y: 30, opacity:0, duration: 1, delay: 0.2 });
    gsap.from('.hero p', { y: 10, opacity:0, duration: 0.8, delay: 0.4 });

    // fade-in cards
    gsap.utils.toArray('.card, .stock-card, .etf-card, .tool-card').forEach((el, i) => {
      gsap.from(el, { y: 40, opacity:0, duration: 0.9, delay: 0.08 * i, ease: 'power2.out' });
    });
  });

  /************************************************************************
   * Buttons: CTA & Demo
   ************************************************************************/
  $('#startTradeBtn').addEventListener('click', () => {
    // show a friendly modal to create account or start demo
    openModal(`
      <div class="flex items-center justify-between mb-4">
        <div>
          <h3 class="font-bold">Start Trading</h3>
          <div class="small muted">Create a free demo account</div>
        </div>
      </div>
      <div class="mb-3">
        <label class="small muted">Email</label>
        <input id="signupEmail" type="email" class="w-full bg-transparent border border-var(--border-color) rounded px-3 py-2 mt-1" placeholder="you@example.com" />
      </div>
      <div class="flex gap-2 mt-3">
        <button id="createAccount" class="btn-gold">Create Demo Account</button>
        <button id="cancelCreate" class="btn-ghost">Cancel</button>
      </div>
    `);
    $('#cancelCreate').addEventListener('click', closeModal);
    $('#createAccount').addEventListener('click', () => {
      const email = $('#signupEmail').value.trim();
      if (!email) return alert('Please enter an email');
      toast('Demo account created â€” welcome!');
      closeModal();
    });
  });

  $('#demoBtn').addEventListener('click', () => {
    openModal(`<div><h3 class="font-bold">Schedule a Demo</h3><p class="small muted">Our team will reach out.</p><div class="mt-3"><button id="closeDemo" class="btn-gold">OK</button></div></div>`);
    $('#closeDemo').addEventListener('click', closeModal);
  });

  $('#ctaCreate').addEventListener('click', () => { $('#startTradeBtn').click(); });
  $('#ctaDemo').addEventListener('click', () => { $('#demoBtn').click(); });

  /************************************************************************
   * View symbol in TradingView when clicking watchlist items etc
   ************************************************************************/
  function ensureValidSymbolForTV(sym) {
    // Basic heuristic: if symbol contains ':' return as-is, else prefix NASDAQ:
    if (sym.includes(':')) return sym;
    // common ETFs/tickers
    const upper = sym.toUpperCase();
    const knownExchanges = ['NYSE','NASDAQ','AMEX'];
    // We'll default to NASDAQ prefix for common tickers (user can search inside widget)
    return upper;
  }

  /************************************************************************
   * Misc: update UI always reflect watchlist & stocks
   ************************************************************************/
  // render dynamic components on load
  renderWatchlist();

  // update tv symbol display when widget changed (we recreate widget whenever we call initTradingView)
  // helper: openTradingViewWithSymbol is already defined

  // Simple periodic refresh of perf chart to make it feel alive
  setInterval(() => {
    // nudge perf chart dataset values
    if (perfChart) {
      perfChart.data.datasets[0].data = perfChart.data.datasets[0].data.map(v => +(v * (1 + ((Math.random()*2-1)/100))).toFixed(2));
      perfChart.update();
    }
  }, 10000);

  // Simulate updating the top summary numbers
  setInterval(() => {
    const randCap = Math.round(43200000000000 * (0.98 + Math.random()*0.04));
    $('#globalCap').textContent = formatMoney(randCap);
    const randVol = Math.round(298000000000 * (0.98 + Math.random()*0.08));
    $('#vol').textContent = formatMoney(randVol);
  }, 9000);

  /************************************************************************
   * Small UX helpers
   ************************************************************************/
  // allow clicking on stock-card body to open a view modal
  document.addEventListener('click', (e) => {
    if (e.target.closest('.stock-card') && !e.target.closest('button')) {
      const card = e.target.closest('.stock-card');
      const symbol = card.querySelector('[data-symbol]')?.dataset.symbol || card.querySelector('.stock-logo')?.textContent.trim();
      const price = card.querySelector('.stock-price span')?.textContent || '0.00';
      openModal(`<div><h3 class="font-bold">${symbol} â€” Details</h3><p class="small muted">Price: $${price}</p><div class="mt-3 flex gap-2"><button class="btn-gold" id="modalBuy">Buy</button><button class="btn-ghost" id="modalSell">Sell</button><button class="btn-ghost" id="modalWatch">Watch</button></div></div>`);
      $('#modalBuy').addEventListener('click', () => { closeModal(); showTradeModal('Buy', symbol, parseFloat(price)); });
      $('#modalSell').addEventListener('click', () => { closeModal(); showTradeModal('Sell', symbol, parseFloat(price)); });
      $('#modalWatch').addEventListener('click', () => { addToWatchlist(symbol); closeModal(); });
    }
  });




  // initial render of top-level dynamic items in stocks grid is already done
  // ensure watchlist UI is visible
  renderWatchlist();

  // sound finish
  console.log('Stocks & ETFs page ready â€” interactive TradingView, watchlist, buy/sell modals, chart, ticker.');

  </script>

  

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>